<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Workflow Diagnostic</title>
    <style>
        #app-container { max-width: 600px; margin: 50px auto; font-family: sans-serif; line-height: 1.6; }
        .progress-bar { height: 10px; background: #eee; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: #007bff; width: 0%; transition: width 0.3s; }
        .question-card { background: #fdfdfd; border: 1px solid #e1e4e8; padding: 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .btn-group { display: flex; gap: 15px; margin-top: 25px; }
        button { flex: 1; padding: 15px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 16px; border: 1px solid #007bff; }
        .btn-yes { background: #007bff; color: white; }
        .btn-no { background: white; color: #007bff; }
    </style>
</head>
<body>

<div id="app-container">
    <div class="progress-bar"><div id="progress" class="progress-fill"></div></div>
    <div id="quiz-ui">
        <div class="question-card">
            <p id="question-count" style="color: #666; font-size: 0.9em;"></p>
            <h3 id="question-text">Loading diagnostic...</h3>
            <div class="btn-group">
                <button class="btn-yes" onclick="answer(true)">YES</button>
                <button class="btn-no" onclick="answer(false)">NO</button>
            </div>
        </div>
    </div>
</div>

<script>
    // These match your PRD exactly [cite: 127-155]
    const questions = [
        { q: "Does the workflow require identity verification?", w: 1 },
        { q: "Does the workflow include mandatory disclosures or signatures?", w: 2 },
        { q: "Does the workflow trigger regulated financial or healthcare actions?", w: 2 },
        { q: "Does the workflow require an immutable audit trail?", w: 2 },
        { q: "Does the workflow have zero tolerance for errors or deviation?", w: 2 },
        { q: "Does the workflow require exact step order and strict validations?", w: 2 },
        { q: "Does the workflow include branching logic where the wrong branch creates liability?", w: 2 },
        { q: "Does the workflow trigger irreversible state changes?", w: 2 },
        { q: "Does the workflow fail expensively if a step is skipped?", w: 3 },
        { q: "Does the workflow touch an enterprise system?", w: 1 },
        { q: "Does the workflow require real-time data synchronization?", w: 3 },
        { q: "Does the workflow write to a system of record?", w: 1 },
        { q: "Does the workflow break when one dependent system is unavailable?", w: 2 },
        { q: "Does the workflow produce many edge cases that require human intervention?", w: 2 },
        { q: "Does the workflow require explicit escalation paths?", w: 2 },
        { q: "Does the workflow demand predictable rollback behavior?", w: 1 },
        { q: "Does the workflow handle PCI, PHI, or PII data?", w: 1 },
        { q: "Does the workflow capture secure documents or signatures?", w: 3 },
        { q: "Does the workflow include policy enforcement with legal exposure?", w: 2 }
    ];

    let currentIndex = 0;
    let totalScore = 0;

    function renderQuestion() {
        if (currentIndex < questions.length) {
            document.getElementById('question-text').innerText = questions[currentIndex].q;
            document.getElementById('question-count').innerText = `Question ${currentIndex + 1} of ${questions.length}`;
            document.getElementById('progress').style.width = `${((currentIndex) / questions.length) * 100}%`;
        } else {
            finish();
        }
    }

    function answer(isYes) {
        if (isYes) {
            totalScore += questions[currentIndex].w; // Add weight if Yes [cite: 123]
        }
        currentIndex++;
        renderQuestion();
    }

    function finish() {
        // Scoring logic per PRD Section 12 [cite: 161, 165, 168]
        let riskClass = totalScore >= 4 ? 'HIGH' : 'LOW';
        
        localStorage.setItem('final_score', totalScore);
        localStorage.setItem('risk_classification', riskClass);
        
        window.location.href = "results.html";
    }

    // Start the vibe
    renderQuestion();
</script>
</body>
</html>
