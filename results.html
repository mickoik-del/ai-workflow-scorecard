<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><title>Results</title>
    <style>
        body { font-family: 'Inter', sans-serif; text-align: center; padding: 50px; }
        .hero { padding: 60px; border-radius: 16px; color: white; margin-bottom: 30px; }
        .high { background: #B91C1C; } .low { background: #2563EB; }
    </style>
</head>
<body>
    <div id="loading"><h2>Syncing results with HubSpot...</h2></div>
    <div id="content" style="display:none;">
        <div id="hero-box" class="hero">
            <h1 id="title"></h1>
            <p id="desc"></p>
        </div>
        <button onclick="window.print()">Download Report</button>
    </div>
<script>
    async function init() {
        const user = JSON.parse(localStorage.getItem('scorecard_user'));
        const risk = localStorage.getItem('risk_classification') || 'LOW';
        
        await fetch('/api/submit-to-hubspot', {
            method: 'POST',
            body: JSON.stringify({ email: user.email, industry: user.industry, risk })
        });

        document.getElementById('loading').style.display = 'none';
        document.getElementById('content').style.display = 'block';
        document.getElementById('hero-box').className = 'hero ' + risk.toLowerCase();
        document.getElementById('title').innerText = risk + " RISK DETECTED";
        document.getElementById('desc').innerText = "We've mapped your " + user.industry + " workflow risks.";
    }
    init();
</script>
</body>
</html>
